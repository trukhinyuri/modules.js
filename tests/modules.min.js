/**
 * @fileOverview
 * @copyright (C) Yuri V. Trukhin.
 * @author Yuri V.Trukhin
 * @version 1.0-snapshot
 * @license Usage requires a licence. For getting price and purchase license subscription write to <a href="mailto:yuri@trukhin.com">yuri@trukhin.com</a>
 */
"use strict";window.exports=window.exports||(window.exports={}),function(e){Object.defineProperties(e,{MODULE:{get:function(){return"module"},enumerable:!0,configurable:!1},TEMPLATE:{get:function(){return"template"},enumerable:!0,configurable:!1},HTML:{get:function(){return"html"},enumerable:!0,configurable:!1},CSS:{get:function(){return"css"},enumerable:!0,configurable:!1},JAVASCRIPT:{get:function(){return"javascript"},enumerable:!0,configurable:!1}}),function(t){function n(t){return null!=t.parentNode?t.parentNode.getAttribute("data-modulesjs_item_type")===e.MODULE:!1}function o(t){return null!=t.parentNode?t.parentNode.getAttribute("data-modulesjs_item_type")===e.TEMPLATE:!1}function a(e){for(var t=document.getElementsByClassName(e),o=[],a=0;t.length>a;a++)n(t[a])&&o.push(t[a]);return o}function d(e){for(var t=document.getElementsByClassName(e),n=[],a=0;t.length>a;a++)o(t[a])&&n.push(t[a]);return n}function s(e,t){return e.className===t?e:null!=e.parentNode?s(e.parentNode,t):null}function r(e,t){return e.getElementsByClassName(t)[0]}function u(){var e=document.URL.split("/");e.pop();var t=e.join("/");return t}t.isHTMLModule=n,t.isHTMLTemplate=o,t.getModules=a,t.getTemplates=d,t.getFirstContainerElementByClassName=s,t.getFirstElementByClassName=r,t.getDocumentRootURL=u}(e.DOM||(e.DOM={})),e.DOM,function(t){function n(e,t,n,o){var a=o||!1;return e.addEventListener(t,n,a),n}function o(e,t,n,o,a){var d=o||this,s=a||!1,r=n.bind(d);return e.addEventListener(t,r,s),r}function a(e,t,n,o){var a=o||!1;e.removeEventListener(t,n,a)}function d(e){return n(document,"DOMContentLoaded",e,!1),e}function s(e,t){var n=t||this;return o(document,"DOMContentLoaded",e,n,!1)}function r(e){a(document,"DOMContentLoaded",e,!1)}function u(e,t,o){return n(document,e,t,o),t}function i(e,t,n,a){var d=n||this;return o(document,e,t,d,a)}function m(e,t,n){var o=n||!1;a(document,e,t,o)}function c(t,o,a){return t===e.MODULE?n(document,"module_"+o+"_loaded",a,!1):t===e.TEMPLATE?n(document,"template_"+o+"_loaded",a,!1):t===e.HTML?n(document,"html_"+o+"_loaded",a,!1):t===e.CSS?n(document,"css_"+o+"_loaded",a,!1):t===e.JAVASCRIPT?n(document,"js_"+o+"_loaded",a,!1):void 0}function l(t,n,a,d){var s=d||this;return t===e.MODULE?o(document,"module_"+n+"_loaded",a,s,!1):t===e.TEMPLATE?o(document,"template_"+n+"_loaded",a,s,!1):t===e.HTML?o(document,"html_"+n+"_loaded",a,s,!1):t===e.CSS?o(document,"css_"+n+"_loaded",a,s,!1):t===e.JAVASCRIPT?o(document,"js_"+n+"_loaded",a,s,!1):void 0}function _(t,n,o){t===e.MODULE?a(document,"module_"+n+"_loaded",o,!1):t===e.TEMPLATE?a(document,"template_"+n+"_loaded",o,!1):t===e.HTML?a(document,"html_"+n+"_loaded",o,!1):t===e.CSS?a(document,"css_"+n+"_loaded",o,!1):t===e.JAVASCRIPT&&a(document,"js_"+n+"_loaded",o,!1)}function f(t,o,a){return t===e.MODULE?n(document,"module_"+o+"_loadingStarted",a,!1):t===e.TEMPLATE?n(document,"template_"+o+"_loadingStarted",a,!1):t===e.HTML?n(document,"html_"+o+"_loadingStarted",a,!1):t===e.CSS?n(document,"css_"+o+"_loadingStarted",a,!1):t===e.JAVASCRIPT?n(document,"js_"+o+"_loadingStarted",a,!1):void 0}function v(t,n,a,d){var s=d||this;return t===e.MODULE?o(document,"module_"+n+"_loadingStarted",a,s,!1):t===e.TEMPLATE?o(document,"template_"+n+"_loadingStarted",a,s,!1):t===e.HTML?o(document,"html_"+n+"_loadingStarted",a,s,!1):t===e.CSS?o(document,"css_"+n+"_loadingStarted",a,s,!1):t===e.JAVASCRIPT?o(document,"js_"+n+"_loadingStarted",a,s,!1):void 0}function g(t,n,o){t===e.MODULE?a(document,"module_"+n+"_loadingStarted",o,!1):t===e.TEMPLATE?a(document,"template_"+n+"_loadingStarted",o,!1):t===e.HTML?a(document,"html_"+n+"_loadingStarted",o,!1):t===e.CSS?a(document,"css_"+n+"_loadingStarted",o,!1):t===e.JAVASCRIPT&&a(document,"js_"+n+"_loadingStarted",o,!1)}function E(e,t,n,o){for(var a=o||!1,d=e.length,s=0;d>s;s++)e[s].addEventListener(t,n,a);return n}function L(e,t,n,o,a){var d=a||!1,s=o||this,r=n.bind(s);e.length;for(var u=0;e.length>u;u++)e[u].addEventListener(t,r,d);return r}function p(e,t,n,o){for(var d=o||!1,s=e.length,r=0;s>r;r++)a(e[r],t,n,d)}function h(e,t,n,o,a){var d=o||!1,s=a||!1,r=n||void 0,u=document.createEvent("CustomEvent");return u.initCustomEvent(t,d,s,r),e.dispatchEvent(u)}(function(t){function n(t,n,o,a){function d(){var e="";return e=null==o?null==a?s+t:s+t+"__"+a:null==a?s+t+"_"+o:s+t+"_"+o+"_"+a}var s="modulesjs_message_",r=d();""!=r&&e.Events.addDocumentListener(r,n,!1)}function o(t,n,o,a){function d(){var e="";return e=null==o?null==a?s+t:s+t+"__"+a:null==a?s+t+"_"+o:s+t+"_"+o+"_"+a}var s="modulesjs_message_",r=d(),u={postAdress:{sourceID:o,destinationID:a},message:n};""!==r&&e.Events.dispatchCustomEvent(document,r,u,!1,!1)}function a(t,n,o,a){function d(){var e="";return e=null==o?null==a?s+t:s+t+"__"+a:null==a?s+t+"_"+o:s+t+"_"+o+"_"+a}var s="modulesjs_message_",r=d();""!==r&&e.Events.removeDocumentListener(r,n)}t.send=o,t.subscribe=n,t.unsubscribe=a})(e.Events.Messages||(e.Events.Messages={})),e.Events.Messages,t.addListener=n,t.addContextListener=o,t.removeListener=a,t.addStartupListener=d,t.addStartupContextListener=s,t.removeStartupListener=r,t.addDocumentListener=u,t.addDocumentContextListener=i,t.removeDocumentListener=m,t.addItemLoadedListener=c,t.addItemLoadedContextListener=l,t.removeItemLoadedListener=_,t.addBeforeItemLoadedListener=f,t.addBeforeItemLoadedContextListener=v,t.removeBeforeItemLoadedListener=g,t.addListeners=E,t.addContextListeners=L,t.removeListeners=p,t.dispatchCustomEvent=h}(e.Events||(e.Events={})),e.Events,function(t){function n(e){return"string"==typeof e?("/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),e):_getDocumentURL()}function o(e,t){var n=e+"/"+t+"/";return n}function a(e,t,n){var o="modulesjs_css_",a=document.getElementsByClassName(o+t)[0];if(!a){var d=document.createElement("link");d.href=e+".css",d.className=o+t,d.type="text/css",d.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(d)}n&&n()}function d(e,t,n){var o="modulesjs_js_",a=document.getElementsByClassName(o+t)[0];a&&document.getElementsByTagName("head")[0].removeChild(a);var d=document.createElement("script");d.src=e+".js",d.className=o+t,d.type="text/javascript",d.async=!0,document.getElementsByTagName("head")[0].appendChild(d);var s=!1;d.onreadystatechange=d.onload=function(){var e=d.readyState;s||e&&"loaded"!==e&&"complete"!==e||(s=!0,n&&n(t))}}function s(e,t,n,o,a,d){function s(e){r(e,n,o,a,d)}u(e,t,s)}function r(e,t,n,o,a){var d=null;if(null!=o){var s=document.getElementsByClassName(o)[0];d=s.getElementsByClassName(t)}else d=document.getElementsByClassName(t);for(var r=d.length,u=0;r>u;u++)d[u].setAttribute("data-modulesjs_item_id",""+u),d[u].setAttribute("data-modulesjs_item_type",n),d[u].innerHTML=e;a&&a()}function u(e,t,n){var o=new XMLHttpRequest;o.open("GET",e+".html",!0),o.onreadystatechange=function(){4===o.readyState&&(200===o.status||304===o.status)&&n&&n(o.responseText,t)},o.send(null)}function i(t,n,r,u,i){function m(t,n,r,u,m){var c=o(t,n),l={itemInfo:{itemName:n,itemPath:c,className:r,containerClassName:i}};e.Events.dispatchCustomEvent(document,"module_"+n+"_loadingStarted",l);var _=c+n;a(_,n,function(){s(_,n,r,e.MODULE,m,function(){d(_,n,function(){e.Events.dispatchCustomEvent(document,"module_"+n+"_loaded",l),u&&u()})})})}setTimeout(function(){m(t,n,r,u,i)},0)}function m(t,o,a,d,s,r){var u=n(o);t===e.MODULE&&i(u,a,d,s,r)}t.load=m}(e.Loader||(e.Loader={})),e.Loader,function(e){function t(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}function n(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||304===n.status)&&t(n.responseText)},n.send()}function o(e,t,n){var o=document.getElementsByClassName("modulesjs-config-"+t)[0];o&&document.getElementsByTagName("head")[0].removeChild(o);var a=document.createElement("script");a.src=e+"/"+t+".js",a.className="modulesjs-config-"+t,a.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(a);var d=!1;a.onreadystatechange=a.onload=function(){var o=a.readyState;d||o&&"loaded"!==o&&"complete"!==o||(d=!0,document.dispatchEvent(new CustomEvent("config_"+t+"_loaded",{detail:{configName:t,_path:e}})),n&&n(t))}}function a(e,t){return Math.floor(Math.random()*(t-e+1))+e}e.getString=t,e.getStringAsync=n,e.loadJSONConfig=o,e.getRandomInt=a}(e.Server||(e.Server={}))}(window.exports.Modules||(window.exports.Modules={}));var Modules=window.exports.Modules;